;SHUBHAM AGARWAL (sagarwl4)
;09/20/2013	Fall 2013

;this code gives us the answer we get on dividing two numbers A and B.

; This is the file you will use for the first Machine Problem
; of ECE 190.  Make sure to comment your code properly and don't
; exceed the line limitation for this assignment.  Good luck!

;0011 0000 0000 0000  ; specifies where the program will be stored (x3000)
; YOUR CODE GOES HERE


; This program primarily uses registers in the following manner:
; R0 contains A-B 
; R1 contains A
; R2 contains B
; R3 contains quotient of A/B
; R4 contains 
; R5 contains 

	.ORIG 	x3000			;
;INITIALIZATION OF ALL THE REGISTERS TO 0

	AND	R0,R0,#0		;clearing R0
	AND 	R1,R1,#0		;clearing R1
	AND 	R2,R2,#0		;clearing R2
	AND 	R3,R3,#0		;clearing R3

;LOADING THE REGISTERS
	
	LDI	R1,AVALUE		;A<-M[x4000]: R1 contains dividend - A
	LDI	R2,BVALUE		;B<-M[x4001]: R2 contains divisor  - B

	NOT	R2,R2			;we invert b and get -R2 
	ADD	R2,R2,#1		;R2<-R2+1: add 1 to -B to get 2s complement

;INITIALIZING THE LOOP OF A-B
	

LOOP1	ADD	R0,R1,R2		;R0<-R1+R2: we get A-B and store in R0	
	BRnz	SKIP			;if A-B < 0 or -ve number then answer is 0.	
	ADD	R3,R3,#1		;R3<-R3+#1: we get the quotient of A/B
	BRp	LOOP1			;if A-B < 0, then subtract B again
	
	ST	R3,SKIP			;we store the result in R3 into memory X5000 as asked.	
	TRAP	x25			;


	

AVALUE	.FILL	x4000			;
BVALUE	.FILL	x4001			;
SKIP	.FILL	x5000			;

.END
