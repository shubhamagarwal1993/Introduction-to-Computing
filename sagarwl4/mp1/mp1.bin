;SHUBHAM AGARWAL (sagarwl4)
;09/20/2013	Fall 2013

;this code gives us the answer we get on dividing two numbers A and B.

; This is the file you will use for the first Machine Problem
; of ECE 190.  Make sure to comment your code properly and don't
; exceed the line limitation for this assignment.  Good luck!

0011 0000 0000 0000  ; specifies where the program will be stored (x3000)
; YOUR CODE GOES HERE


; This program primarily uses registers in the following manner:
; R0 contains A-B 
; R1 contains A
; R2 contains B
; R3 contains quotient of A/B


;INITIALIZATION OF ALL THE REGISTERS TO 0
0101	000 000 1 00000			;clearing R0
0101	001 001 1 00000			;clearing R1
0101	010 010 1 00000			;clearing R2
0101	011 011 1 00000			;clearing R3


;LOADING THE REGISTERS
1010	001 00001 0010			;**(LDI)**	A<-M[x4000]:R1 contains dividend	
1010    010 00001 0010			;**(LDI)**	B<-M[x4001]:R2 contains divisor  - B	

0000	001 00000 0010			;if B is +ve then go to invert B and A+B
0000	100 00000 1110			;if B is -ve then go to halt
0000	010 000001000			;if B is 0 then go to adding -1 to R3 and storing in x5000

1001	010 010	111111			;we invert b and get -R2 
0001	010 010 1 00001			;R2<-R2+1: add 1 to -B to get 2s complement


;INITIALIZING THE LOOP OF A-B
0001	001 001 000 010			;R1<-R1+R2: 	we get A-B and store in R1	
0000	100 00000 1001			;if A-B is -ve , then branch to HALT.
0000	010 00000 0110			;if A-B is 0, then branch to add 1 to R3 and store to R3

0001	011 011 1 00001			;R3<-R3+#1: 	we get the quotient of A/B
1011 011 000001001			;**(STI)**	Loads the value of R3 into memory x5000
0000	001 11111 1010			;if R3 > 0, then loop back to A-B. :NOTE: this will always happen.



0001 011 011 1 11111			;add -1 to R3 and store to R3
1011 011 000000110			;**(STI)**	Loads the value of R3 into memory x5000 
0000 111 000000010			;go to halt

0001 011 011 1 00001			;add 1 to R3 and store to R3
1011 011 000000011			;**(STI)**	Loads the value of R3 into memory x5000 

1111 0000 0010 0101			;HALT


;memory registers in which we store another memory location for LDI and STI instructions
0100 0000 0000 0000			;x4000
0100 0000 0000 0001 			;x4001
0101 0000 0000 0000			;x5000

